<div class="col-md-12">
    <div class="panel panel-default">

        <div class="panel-heading">

            <h3 class="panel-title"><strong> Project Payment</strong> Details</h3>

        </div>

        <div class="panel-body">

            <div class="row">

                <form  name="ProjectPaymentDetailsForm" class="form-horizontal" novalidate>

                    <div class="col-md-6">

                        <div class="form-group">

                            <div class="col-md-3">

                                <label class="control-label">Project Name</label>

                            </div>
                            <div class="col-md-9">

                                <select class="form-control" name="ProjectName" ng-model="paymentDetails.projectID" ng-change="viewProjectPaymentDetails(paymentDetails.projectID)" required/>

                                <option value="" disabled selected>Choose Project</option>
                                <option ng-repeat="project in Projects" value="{{project.project_id }}">{{project.project_name}}</option>
                                </select>
                                <div class="help-block"
                                     ng-messages="ProjectPaymentDetailsForm.ProjectName.$error"
                                     ng-show="formSubmitted">
                                    <span style="color:red" ng-message="required">Please select Project </span>
                                </div>

                            </div>

                        </div>

                        <div class="form-group">
                            <div class="col-md-3">
                                <label class="control-label">Payment Mode</label>
                            </div>
                            <div class="col-md-9">
                                <select class="form-control select" name="ProjectPaymentMode" ng-model="paymentDetails.paymentMode" required />
                                <option value="" disabled selected>Choose Payment Mode</option>
                                <option value="cash">Cash</option>
                                <option value="cheque">Cheque</option>
                                <option value="dd">DD</option>
                                <option value="netBanking">Net Banking</option>
                                </select>
                                <div class="help-block"
                                     ng-messages="ProjectPaymentDetailsForm.ProjectPaymentMode.$error"
                                     ng-show="formSubmitted">
                                    <span style="color:red" ng-message="required">Please select payment mode </span>
                                </div>
                            </div>
                        </div>
                        <div id="cash" ng-if="paymentDetails.paymentMode=='cash'">
                            <!--Start of amount paid field-->
                            <div class="form-group">
                                <div class="col-md-3">
                                    <label class="control-label">Amount Paid</label>
                                </div>
                                <div class="col-md-9">
                                    <div class="input-group">
                                        <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                        <input type="text" ng-blur = "getPendingAmount()" class="form-control"
                                               name="AmountPaid"
                                               ng-model="paymentDetails.amountPaid" pattern="[0-9]+" required />
                                    </div>
                                    <div class="help-block"
                                         ng-messages="ProjectPaymentDetailsForm.AmountPaid.$error"
                                         ng-show="formSubmitted">
                                        <span style="color:red" ng-message="required">Please Enter amount paid</span>
                                        <span style="color:red" ng-message="pattern">Only digits are allowed</span>
                                    </div>

                                </div>
                            </div>
                            <!--End of amount paid field-->
                            <!--Start of paid to field-->
                            <div class="form-group">
                                <div class="col-md-3">
                                    <label class="control-label">Paid To</label>
                                </div>
                                <div class="col-md-9">
                                    <div class="input-group">
                                        <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                        <input type="text" class="form-control"
                                               name="AmountReceiver"
                                               ng-model="paymentDetails.paidTo"  pattern="[a-zA-Z]+" minlength=2 required />
                                    </div>
                                    <div class="help-block"
                                         ng-messages="ProjectPaymentDetailsForm.AmountReceiver.$error"
                                         ng-show="formSubmitted">

                                        <span style="color:red" ng-message="required">Please provide name of amount receiver</span>
                                        <span style="color:red" ng-message="pattern">Only  characters are allowed</span>
                                        <span style="color:red" ng-message="minlength">Receiver name is too short </span>
                                    </div>

                                </div>

                            </div>
                            <!--End of paid to field-->
                            <!--Start of payment date field-->
                            <div class="form-group">
                                <div class="col-md-3">
                                    <label class="control-label">Date of Payment</label>
                                </div>
                                <div class="col-md-9">
                                    <div class="input-group">
                                        <span class="input-group-addon"><span class="fa fa-calendar"></span></span>
                                        <input type="text" class="form-control" ng-model="paymentDetails.paymentDate" ng-click="openDate()" uib-datepicker-popup="{{'dd-MM-yyyy'}}" show-weeks="false" is-open="showpopup.opened" datepicker-options="dateOptions"  show-button-bar="false" ng-required="true"/>
                                    </div>

                                </div>
                            </div>
                            <!--End of payment date field-->
                            <!--Start of pending amount field-->
                            <div class="form-group">
                                <div class="col-md-3 ">
                                    <label class="control-label">Pending Amount</label>
                                </div>
                                <div class="col-md-9">
                                    <div class="input-group">
                                        <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                        <input type="text" class="form-control"
                                               name="PendingAmount"  ng-model="paymentDetails.pendingAmount" readonly>
                                    </div>
                                </div>
                            </div>
                            <!--End of pending amount field-->
                        </div>
                        <!--End of amount paid section for cash mode-->
                        <div id="cheque" ng-if="paymentDetails.paymentMode=='cheque' || paymentDetails.paymentMode=='dd' || paymentDetails.paymentMode=='netBanking'">
                            <!--Start of amount paid field-->
                            <div class="form-group">
                                <div class="col-md-3">
                                    <label class="control-label">Amount Paid</label>
                                </div>
                                <div class="col-md-9">
                                    <div class="input-group">
                                        <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                        <input type="text" ng-blur = "getPendingAmount()" class="form-control" name="oAmountPaid"
                                               ng-model="paymentDetails.amountPaid" pattern="[0-9]+" required/>
                                    </div>
                                    <div class="help-block"
                                         ng-messages="ProjectPaymentDetailsForm.oAmountPaid.$error"
                                         ng-show="formSubmitted">
                                        <span style="color:red" ng-message="required">Please Enter amount paid</span>
                                        <span style="color:red" ng-message="pattern">Only digits are allowed</span>
                                    </div>
                                </div>
                            </div>
                            <!--End of amount paid field-->
                            <!--Start of bank name field-->
                            <div class="form-group">
                                <div class="col-md-3">
                                    <label class="control-label">Bank Name</label>
                                </div>
                                <div class="col-md-9">
                                    <div class="input-group">
                                        <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                        <input type="text" class="form-control" name="BankName" ng-model="paymentDetails.bankName"  pattern="[a-zA-Z]+" required/>
                                    </div>
                                    <div class="help-block"
                                         ng-messages="ProjectPaymentDetailsForm.BankName.$error"
                                         ng-show="formSubmitted">

                                        <span style="color:red" ng-message="required">Please provide Bank Name</span>
                                        <span style="color:red" ng-message="pattern">Only  characters are allowed</span>

                                    </div>
                                </div>
                            </div>
                            <!--End of bank name field-->
                            <!--Start of Branch Name field-->
                            <div class="form-group">
                                <div class="col-md-3">
                                    <label class="control-label">Branch Name</label>
                                </div>
                                <div class="col-md-9">
                                    <div class="input-group">
                                        <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                        <input type="text" class="form-control" name="BranchName" ng-model="paymentDetails.branchName" pattern="[a-zA-Z]+"  required />
                                    </div>
                                    <div class="help-block"
                                         ng-messages="ProjectPaymentDetailsForm.BranchName.$error"
                                         ng-show="formSubmitted">

                                        <span style="color:red" ng-message="required">Please provide Branch Name</span>
                                        <span style="color:red" ng-message="pattern">Only  characters are allowed</span>

                                    </div>
                                </div>
                            </div>
                            <!--End of Branch Name field-->
                            <!--Start of Unique Number field-->
                            <div class="form-group">
                                <div class="col-md-3">
                                    <label class="control-label">Unique Number</label>
                                </div>
                                <div class="col-md-9">
                                    <div class="input-group">
                                        <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                        <input type="text" class="form-control" name="UniqueNumber"
                                               ng-model="paymentDetails.uniqueNumber"
                                               pattern="[0-9]+" required/>
                                    </div>
                                    <div class="help-block"
                                         ng-messages="ProjectPaymentDetailsForm.UniqueNumber.$error"
                                         ng-show="formSubmitted">
                                        <span style="color:red" ng-message="required">Please provide Unique transaction number</span>
                                        <span style="color:red" ng-message="pattern">Only digits are allowed</span>
                                    </div>

                                </div>
                            </div>
                            <!--End of Unique Number field-->
                            <!--Start of paid to field-->
                            <div class="form-group">
                                <div class="col-md-3">
                                    <label class="control-label">Paid To</label>
                                </div>
                                <div class="col-md-9">
                                    <div class="input-group">
                                        <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                        <input type="text" class="form-control"
                                               name="AmountReceiver"
                                               ng-model="paymentDetails.paidTo"
                                               pattern="[a-zA-Z]+" minlength=2 required />
                                    </div>
                                    <div class="help-block"
                                         ng-messages="ProjectPaymentDetailsForm.AmountReceiver.$error"
                                         ng-show="formSubmitted">

                                        <span style="color:red" ng-message="required">Please provide name of amount receiver</span>
                                        <span style="color:red" ng-message="pattern">Only  characters are allowed</span>
                                        <span style="color:red" ng-message="minlength">Receiver name is too short </span>
                                    </div>
                                </div>
                            </div>
                            <!--End of paid to field-->
                            <!--Start of pending amount field-->
                            <div class="form-group">
                                <div class="col-md-3 ">
                                    <label class="control-label">Pending Amount</label>
                                </div>
                                <div class="col-md-9">
                                    <div class="input-group">
                                        <span class="input-group-addon"><span class="fa fa-pencil"></span></span>
                                        <input type="text" class="form-control" name="pendingAmount" ng-model="paymentDetails.pendingAmount" readonly>
                                    </div>
                                </div>
                            </div>
                            <!--End of pending amount field-->

                            <!--Start of payment date field-->
                            <div class="form-group">
                                <div class="col-md-3">
                                    <label class="control-label">Date of Payment</label>
                                </div>
                                <div class="col-md-9">
                                    <div class="input-group">
                                        <span class="input-group-addon"><span class="fa fa-calendar"></span></span>
                                        <input type="text" class="form-control" ng-model="paymentDetails.paymentDate" ng-click="payDate()" uib-datepicker-popup="{{'dd-MM-yyyy'}}" show-weeks="false" is-open="datePicker.opened" datepicker-options="dateOptions"  show-button-bar="false" ng-required="true"/>
                                    </div>

                                </div>
                            </div>
                            <!--End of payment date field-->

                        </div>
                        <!--End of amount paid Section-->

                    </div>
                    <div class="col-md-5 col-md-offset-1"  ng-if="showPaymentDetails">

                        <div class="form-group">
                            <div class="col-md-6">
                                <label class="control-label">Total Amount :</label>
                            </div>
                            <div class="col-md-6">
                                <strong>  {{packageAmount}}</strong>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-6">
                                <label class="control-label">Previous Amount Paid :</label>
                            </div>
                            <div class="col-md-6">
                                <strong> {{previousAmountPaid}} </strong>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-6">
                                <label class="control-label">Amount Remaining :</label>
                            </div>
                            <div class="col-md-6">
                                <strong> {{remainingAmount}}</strong>
                            </div>
                        </div>
                        <div class="form-group">
                            <button ng-click="viewPaymentDetails()" data-toggle="modal" data-target="#viewPaymentDetails" class="btn  btn-default pull-right">View Details</button>
                        </div>
                    </div>
                </form>

            </div>

        </div>

        <div class="panel-footer">

            <button ng-click="(formSubmitted=true)
                    && ProjectPaymentDetailsForm.$valid
                    && submitPaymentDetails('lg',paymentDetails)"  class="btn  btn-danger pull-right">Submit<span class="glyphicon glyphicon-circle-arrow-right"></span>
            </button>
            <button ng-click="clearFields(paymentDetails)" class="btn  btn-default pull-right">Clear Form</button>
        </div>

    </div>
</div>

<!--<hicretemodal visible="showModal" title="Schedule Followup">-->
<!--<div class="modal-body">-->
<!--<div class="row">-->
<!--<form  name="applicatorAmountFollowUpForm" class="form-horizontal" novalidate>-->
<!--<div class="form-group">-->
<!--<div class="col-md-4">-->
<!--<label class="control-label">Followup Date</label>-->
<!--</div>-->
<!--<div class="col-md-8">-->
<!--<div class="input-group">-->
<!--<span class="input-group-addon"><span class="fa fa-calendar"></span></span>-->
<!--<input type="date" class="form-control" ng-model="applicatorDetails.followupdate">-->
<!--</div>-->
<!--</div>-->
<!--</div>-->
<!--<div class="form-group">-->
<!--<div class="col-md-4">-->
<!--<label class="control-label">Followup Employee Id</label>-->
<!--</div>-->
<!--<div class="col-md-8">-->
<!--<div class="input-group">-->
<!--<span class="input-group-addon"><span class="fa fa-pencil"></span></span>-->
<!--<input type="text" class="form-control" name="followupEmployeeId" ng-model="applicatorDetails.followupemployeeId">-->
<!--</div>-->
<!--</div>-->
<!--</div>-->
<!--</form>-->
<!--</div>-->
<!--</div>-->
<!--<div class="modal-footer">-->
<!--<button type="button" class="btn btn-default"-->
<!--ng-click="processFollowup(applicatorDetails)">Submit</button>-->
<!--</div>-->
<!--&lt;!&ndash;End of modal-footer&ndash;&gt;-->
<!--</hicretemodal>-->

<div class="modal fade" id="viewPaymentDetails" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Payment Details</h4>
            </div>
            <div class="modal-body">
                <div class="row">

                    <div class="table-responsive">
                        <table class="table table-actions table-striped">
                            <thead>
                            <tr>
                                <th width="15%">Amount Paid</th>
                                <th width="15%">Date of payment</th>
                                <th width="15%">Paid to</th>
                                <th width="15%">Payment Mode</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="payment in projectPayment">
                                <td>{{payment.amount_paid}}</td>
                                <td>{{payment.date_of_payment}}</td>
                                <td>{{payment.paid_to}}</td>
                                <td>{{payment.payment_mode}}</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <!--<div class="form-group">-->
                    <!--<div class="col-md-4">-->
                    <!--<label class="control-label"><b>Package Total Amount</b></label>-->
                    <!--</div>-->
                    <!--<div class="col-md-6">-->
                    <!--<b> {{selectedTentetiveApplicator.package_total_amount}} </b>-->
                    <!--</div>-->
                    <!--</div>-->

                </div>

            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
            <!--End of modal-footer-->
        </div>
        <!--End of Modal Content-->
    </div>
    <!--End of modal dialog-->
</div>


